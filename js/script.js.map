{"version":3,"file":"script.js","mappings":"MAwHA,SAASA,EAAUC,GAIlB,IAHA,IAAIC,EAAOD,EAAQ,IAEfE,EADgBC,mBAAmBC,SAASC,QACzBC,MAAM,KACrBC,EAAI,EAAGA,EAAGL,EAAGM,OAAQD,IAAK,CAEhC,IADA,IAAIE,EAAIP,EAAGK,GACW,KAAfE,EAAEC,OAAO,IACjBD,EAAIA,EAAEE,UAAU,GAEf,GAAuB,GAAnBF,EAAEG,QAAQX,GACf,OAAOQ,EAAEE,UAAUV,EAAKO,OAAQC,EAAED,OAEnC,CACA,MAAO,EACR,CAtIAK,OAAOT,UAAUU,OAAM,WAItB,IAGIC,EAAc,yRAHCC,GAAGC,YAAY,gCACIC,QAAQ,aAAc,IAEkQ,iCAC9TC,EAAE,QAAQC,OAAQL,GAGjBF,OAAO,yBAAyBQ,KAAK,KAAKC,OAAM,SAASC,GACxDA,EAAEC,iBACF,IAAIC,EAAcT,GAAGC,YAAY,iBAGlC,OAFaS,OAAOC,OACZC,SAASC,KAAOJ,GACjB,CACR,IAGAZ,OAAQT,UAAW0B,GAAI,QAAS,+BAA8B,SAASP,GACtEA,EAAEC,iBACF,IAAIC,EAAcT,GAAGC,YAAY,iBAG9B,OAFaS,OAAOC,OAChBC,SAASC,KAAOJ,GACb,CACR,IAEH,IAAIM,EAAchC,EAAU,iBACxBiC,EAAmBjC,EAAU,oBAC7BkC,EAAuBlC,EAAU,wBAErC,GAAwB,oBAAbmC,QAA0B,CACpC,IAAIC,EAAoBC,aAAaC,QAAQ,0BAClB,IAAhBN,GAA8C,MAAdA,GAAuBA,GAAeI,IAChFC,aAAaE,QAAQ,oBAAqBP,GAC1CK,aAAaE,QAAQ,6BAA8BN,GACnDI,aAAaE,QAAQ,iCAAkCL,GAEzD,CAGApB,OAAQT,UAAW0B,GAAG,CACrBS,UAAW,WACV1B,OAAQ2B,MAAOnB,KAAK,0BAA0BoB,IAAI,CAACC,WAAY,WAChE,EACAC,WAAY,WACX9B,OAAQ2B,MAAOnB,KAAK,0BAA0BoB,IAAI,CAACC,WAAY,UAChE,GACC,mBACF7B,OAAQT,UAAW0B,GAAG,CACrBS,UAAW,WACV1B,OAAQ2B,MAAOnB,KAAK,0BAA0BoB,IAAI,CAACC,WAAY,WAChE,EACAC,WAAY,WACX9B,OAAQ2B,MAAOnB,KAAK,0BAA0BoB,IAAI,CAACC,WAAY,UAChE,GACC,kBAEF7B,OAAQT,UAAW0B,GAAG,QAAQ,8BAA6B,WAE1Dc,QAAQC,IAAI,yBACZD,QAAQC,IAAIhC,OAAQ2B,MAAOM,QAAQ,2BAEnCjC,OAAQ2B,MAAOM,QAAQ,sBAAsBzB,KAAK,0CAA0C0B,MAC7F,IAEAlC,OAAQT,UAAW0B,GAAI,SAAS,SAASP,GACxC,IAAIyB,EAA+B7B,EAAE,8BAEhC6B,EAA6BC,GAAG1B,EAAE2B,SAAiE,IAAtDF,EAA6BG,IAAI5B,EAAE2B,QAAQ1C,QAE5FK,OAAO,0CAA0CuC,MAEnD,GAqCD,G","sources":["webpack://aaochat/./src/script.js"],"sourcesContent":["jQuery(document).ready(function(){\n\n\t//$(\"head\").append(\"<meta http-equiv=\\\"Content-Security-Policy\\\" content=\\\"connect-src 'self'\\\" />\");\n\n\tvar loader_image = OC.generateUrl('apps/aaochat/img/rolling.gif'); \n\tvar loader_image_final = loader_image.replace(\"/index.php\", \"\");\n\n\tvar loader_html = '<div class=\"aaochat_loader\" style=\"background: black;height: 100%;width: 100%;opacity: 0.4;position:fixed;top:0;z-index: 999999;display:none;\"></div><div class=\"aaochat_loader\" style=\"position:fixed;top:40%;z-index: 999999;width:100%;text-align: center;display:none;\"><img src=\"'+loader_image_final+'\" style=\"height: 72px;\"></div>';\n\t$('body').append( loader_html );\n\n\n \tjQuery('li[data-id=\"aaochat\"]').find('a').click(function(e) {\n \t\te.preventDefault();\n \t\tvar aaochat_url = OC.generateUrl(\"/apps/aaochat\");\n\t\tlet newTab = window.open();\n \t\tnewTab.location.href = aaochat_url;\n\t\treturn false;\n\t});\n\n\t//jQuery('li[data-app-id=\"aaochat\"]').find('a').click(function(e) {\n\tjQuery( document ).on( \"click\", 'li[data-app-id=\"aaochat\"] a',function(e) {\n\t\te.preventDefault();\n\t\tvar aaochat_url = OC.generateUrl(\"/apps/aaochat\");\n\t    let newTab = window.open();\n\t\tnewTab.location.href = aaochat_url;\n\t    return false;\n   \t});\n\t\n\tvar ncUserToken = getCookie('ncUserAuthKey'); //readCookieByName('ncUserAuthKey');\n\tvar aaochatServerUrl = getCookie('aaochatServerUrl'); //readCookieByName('ncUserAuthKey');\n\tvar aaochatFileServerUrl = getCookie('aaochatFileServerUrl'); //readCookieByName('ncUserAuthKey');\n\n\tif (typeof(Storage) !== \"undefined\") {\n\t\tvar existsNcUserToken = localStorage.getItem(\"ngStorage-AuthKey\");\n\t\tif((typeof(ncUserToken) != 'undefined' ||  ncUserToken!= null) && ncUserToken != existsNcUserToken) {\n\t\t\tlocalStorage.setItem(\"ngStorage-AuthKey\", ncUserToken);\n\t\t\tlocalStorage.setItem(\"nextcloud-AaoChatServerURL\", aaochatServerUrl);\n\t\t\tlocalStorage.setItem(\"nextcloud-AaoChatFileServerURL\", aaochatFileServerUrl);\n\t\t}\n\t}\n\n\n\tjQuery( document ).on({\n\t\tmouseover: function () {\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"visible\"});\n\t\t},\n\t\tmouseleave: function () {\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"hidden\"});\n\t\t}\n\t},'.responses-chat');\n\tjQuery( document ).on({\n\t\tmouseover: function () {\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"visible\"});\n\t\t},\n\t\tmouseleave: function () {\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"hidden\"});\n\t\t}\n\t},'.messages-chat');\n\n\tjQuery( document ).on('click','.aaocchat-context-menu-btn',function() {\n\t\t//jQuery( this ).find('.aaocchat-dropdown-menu-left-side-ope').css({display: \"block\"});\n\t\tconsole.log('click on context menu');\n\t\tconsole.log(jQuery( this ).parents('.aaocchat-context-menu'));\n\t\t//jQuery( this ).parents('.aaocchat-context-menu').closest('.aaocchat-dropdown-menu-left-side-open').show();\n\t\tjQuery( this ).parents('.aaochat-msg-block').find('.aaocchat-dropdown-menu-left-side-open').show();\n\t});\n\n\tjQuery( document ).on( \"click\", function(e) {\n\t\tvar aaocchatContextMenuContainer = $(\".aaocchat-context-menu-btn\");\n\t\t// if the target of the click isn't the container nor a descendant of the container\n\t\tif (!aaocchatContextMenuContainer.is(e.target) && aaocchatContextMenuContainer.has(e.target).length === 0) \n\t\t{\n\t\t\tjQuery('.aaocchat-dropdown-menu-left-side-open').hide();\n\t\t}\n\t});\n\n\t/*\n\tjQuery( \"#chatMessageListContainer\" ).on('click','.responses-chat',\n\t\tfunction() {\n\t\t\tconsole.log('chat on hover');\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"visible\"});\n\t\t}, function() {\n\t\t\tconsole.log('chat on hover out');\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"hidden\"});\n\t\t}\n\t);\n\tjQuery( \"#chatMessageListContainer\" ).on('click','.messages-chat',\n\t\tfunction() {\n\t\t\tconsole.log('chat on hover');\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"visible\"});\n\t\t}, function() {\n\t\t\tconsole.log('chat on hover out');\n\t\t\tjQuery( this ).find('.aaocchat-context-menu').css({visibility: \"hidden\"});\n\t\t}\n\t);\n\t*/\n\n\n\t/*jQuery('.aaochat-image-preview').fancybox({\n\t\tcaption : function( instance, item ) {\n\t\t\tvar caption = $(this).data('caption') || '';\n\t\t\tconsole.log('image preview');\n\t\t\tif ( item.type === 'image' ) {\n\t\t\t\tcaption = (caption.length ? caption + '&nbsp;' : '') + '<a href=\"' + item.src + '\">Download image</a>' ;\n\t\t\t}\n\t\n\t\t\treturn caption;\n\t\t}\n\t});*/\n\n\t\n}); \n\nfunction setCookie(cname, cvalue, exdays) {\n\tconst d = new Date();\n\td.setTime(d.getTime() + (exdays*24*60*60*1000));\n\tlet expires = \"expires=\"+ d.toUTCString();\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nfunction getCookie(cname) {\n\tlet name = cname + \"=\";\n\tlet decodedCookie = decodeURIComponent(document.cookie);\n\tlet ca = decodedCookie.split(';');\n\tfor(let i = 0; i <ca.length; i++) {\n\t  let c = ca[i];\n\t  while (c.charAt(0) == ' ') {\n\t\tc = c.substring(1);\n\t  }\n\t  if (c.indexOf(name) == 0) {\n\t\treturn c.substring(name.length, c.length);\n\t  }\n\t}\n\treturn \"\";\n}\n\n"],"names":["getCookie","cname","name","ca","decodeURIComponent","document","cookie","split","i","length","c","charAt","substring","indexOf","jQuery","ready","loader_html","OC","generateUrl","replace","$","append","find","click","e","preventDefault","aaochat_url","window","open","location","href","on","ncUserToken","aaochatServerUrl","aaochatFileServerUrl","Storage","existsNcUserToken","localStorage","getItem","setItem","mouseover","this","css","visibility","mouseleave","console","log","parents","show","aaocchatContextMenuContainer","is","target","has","hide"],"sourceRoot":""}